# AmneziaWG Docker Server Configuration
# Docker-реализация: asychin (https://github.com/asychin)
# Оригинальный VPN сервер: AmneziaWG Team (https://github.com/amnezia-vpn)
# Скопируйте этот файл в .env и настройте под ваши нужды

# ============================================================================
# ОСНОВНЫЕ НАСТРОЙКИ СЕРВЕРА
# ============================================================================

# Имя интерфейса AmneziaWG (рекомендуется оставить awg0)
AWG_INTERFACE=awg0

# Порт прослушивания UDP (51820 - стандартный, можно изменить для обхода блокировок)
# Популярные альтернативы: 443 (HTTPS), 53 (DNS), 1194 (OpenVPN)
AWG_PORT=51820

# Внутренняя сеть VPN (не должна пересекаться с локальными сетями)
AWG_NET=10.13.13.0/24

# IP адрес сервера в VPN сети
AWG_SERVER_IP=10.13.13.1

# DNS серверы для клиентов (разделенные запятой)
# Рекомендуется: 8.8.8.8,8.8.4.4 (Google) или 1.1.1.1,1.0.0.1 (Cloudflare)
AWG_DNS=8.8.8.8,8.8.4.4

# ============================================================================
# ПУБЛИЧНЫЙ IP СЕРВЕРА (АВТООПРЕДЕЛЕНИЕ)
# ============================================================================

# Публичный IP адрес вашего сервера для клиентских конфигураций
# 
# ВАРИАНТЫ НАСТРОЙКИ:
# 1. auto (по умолчанию) - автоматическое определение через внешние сервисы
# 2. Конкретный IP - принудительно установить определенный адрес
# 3. Не задано - автоопределение как с "auto"
#
# АВТООПРЕДЕЛЕНИЕ IP:
# Система последовательно опрашивает надежные сервисы в следующем порядке:
# • https://eth0.me           (быстрый и надежный)
# • https://ipv4.icanhazip.com (резервный)
# • https://api.ipify.org     (популярный API)
# • https://checkip.amazonaws.com (AWS сервис)
# • https://ipinfo.io/ip      (детальная геоинформация)
# • https://ifconfig.me/ip    (классический сервис)
# • http://whatismyip.akamai.com (CDN провайдер)
# • http://i.pn               (минималистичный)
#
# При недоступности всех сервисов выводится предупреждение с инструкциями.
#
# ПРИМЕРЫ:
SERVER_PUBLIC_IP=auto                    # Автоопределение (рекомендуется)
# SERVER_PUBLIC_IP=203.0.113.123        # Конкретный IP
# SERVER_PUBLIC_IP=                     # Пустое значение = автоопределение

# ============================================================================
# НАСТРОЙКИ КЛИЕНТОВ
# ============================================================================

# Подсеть для клиентов (обычно совпадает с AWG_NET)
CLIENTS_SUBNET=10.13.13.0/24

# Разрешенные IP для маршрутизации через VPN
# 0.0.0.0/0 - весь трафик через VPN
# 192.168.1.0/24 - только локальная сеть
ALLOWED_IPS=0.0.0.0/0

# ============================================================================
# ПАРАМЕТРЫ ОБФУСКАЦИИ AMNEZIAWG ДЛЯ ОБХОДА DPI
# ============================================================================
# Эти параметры маскируют VPN трафик под обычный HTTPS трафик,
# что помогает обходить системы глубокой инспекции пакетов (DPI)

# Jc: Интенсивность джиттера (рекомендуется: 3-15)
AWG_JC=7

# Jmin/Jmax: Размер "мусорных" пакетов для маскировки (байты)
# Jmin должен быть меньше Jmax. Большие значения = лучшая маскировка + больше трафика
AWG_JMIN=50
AWG_JMAX=1000

# S1/S2: Размеры заголовков для имитации HTTPS (байты)
# Типичные значения для HTTPS: S1=86, S2=574
AWG_S1=86
AWG_S2=574

# H1-H4: Хеш-функции для обфускации (1-4)
# Рекомендуется использовать разные значения
AWG_H1=1
AWG_H2=2
AWG_H3=3
AWG_H4=4

# ============================================================================
# АЛЬТЕРНАТИВНЫЕ НАСТРОЙКИ ДЛЯ СТРОГОГО DPI
# ============================================================================
# Если стандартные настройки не помогают обходить блокировки, попробуйте:
#
# Усиленная обфускация:
# AWG_JC=12
# AWG_JMIN=75
# AWG_JMAX=1500
# AWG_S1=96
# AWG_S2=684
#
# Имитация DNS:
# AWG_PORT=53
# AWG_JC=5
# AWG_JMIN=32
# AWG_JMAX=512
#
# Имитация HTTPS:
# AWG_PORT=443
# AWG_S1=86
# AWG_S2=574
# ============================================================================

# ============================================================================
# НАСТРОЙКИ МОНИТОРИНГА И ХЕЛСЧЕКА
# ============================================================================

# Таймаут для выполнения проверок хелсчека (секунды)
# HEALTHCHECK_TIMEOUT=5

# Подробное логирование хелсчека (true/false)
# Включите для отладки проблем с хелсчеком
# HEALTHCHECK_VERBOSE=false

# ============================================================================
# ДОПОЛНИТЕЛЬНЫЕ НАСТРОЙКИ
# ============================================================================

# Принудительное отключение iptables (true/false)
# Используется в CI/CD окружениях или ограниченных средах где iptables недоступен
# ВАЖНО: При отключении iptables NAT и маршрутизация должны быть настроены на хосте!
# AWG_DISABLE_IPTABLES=false

# ============================================================================