# AmneziaWG Docker Server Configuration
# Copy this file to .env and customize as needed

# ============================================================================
# SERVER SETTINGS
# ============================================================================

# AmneziaWG interface name
AWG_INTERFACE=awg0

# UDP listening port (443 default to mimic HTTPS, or use 53 for DNS)
AWG_PORT=443

# VPN internal network
AWG_NET=10.13.13.0/24

# Server IP in VPN network
AWG_SERVER_IP=10.13.13.1

# DNS servers for clients (comma-separated)
AWG_DNS=8.8.8.8,8.8.4.4

# ============================================================================
# PUBLIC IP DETECTION
# ============================================================================

# Server public IP for client configurations
# Options:
#   auto - auto-detect using external services (recommended)
#   <IP> - specify IP manually
SERVER_PUBLIC_IP=auto

# ============================================================================
# CLIENT SETTINGS
# ============================================================================

# Client subnet (usually same as AWG_NET)
CLIENTS_SUBNET=10.13.13.0/24

# Allowed IPs for routing through VPN
# 0.0.0.0/0 - all traffic through VPN
# 192.168.1.0/24 - only specific network
ALLOWED_IPS=0.0.0.0/0

# ============================================================================
# OBFUSCATION PARAMETERS (DPI BYPASS)
# ============================================================================
# These parameters are randomly generated on first 'make init'
# They help bypass Deep Packet Inspection systems

# Jc: Junk packet count (3-10)
AWG_JC=7

# Jmin/Jmax: Junk packet size range (bytes)
AWG_JMIN=50
AWG_JMAX=1000

# S1/S2: Header size modifiers for HTTPS mimicking
AWG_S1=86
AWG_S2=574

# H1-H4: Hash function selectors (1-4)
AWG_H1=1
AWG_H2=2
AWG_H3=3
AWG_H4=4

# ============================================================================
# ALTERNATIVE SETTINGS FOR STRICT DPI
# ============================================================================
# If default settings don't bypass blocks, try:
#
# Enhanced obfuscation:
# AWG_JC=12
# AWG_JMIN=75
# AWG_JMAX=1500
# AWG_S1=96
# AWG_S2=684
#
# DNS mimicking (port 53):
# AWG_PORT=53
# AWG_JC=5
# AWG_JMIN=32
# AWG_JMAX=512
#
# HTTPS mimicking (port 443):
# AWG_PORT=443
# AWG_S1=86
# AWG_S2=574

# ============================================================================
# SITE-TO-SITE VPN (access to server's local network)
# ============================================================================
# Use 'make init-s2s' to configure this mode automatically

# Server's local network subnet (e.g., 192.168.1.0/24)
# When set, VPN clients can access devices in this network
# SERVER_SUBNET=192.168.1.0/24

# Network interface connected to local network (auto-detected if not set)
# SERVER_INTERFACE=eth0

# ============================================================================
# BACKUP SETTINGS
# ============================================================================

# Backup interval for scheduled backup service (e.g., 24h, 12h, 1h)
BACKUP_INTERVAL=24h

# Number of backups to keep
BACKUP_KEEP=10

# ============================================================================
# ADVANCED SETTINGS
# ============================================================================

# Disable iptables (for CI/CD or restricted environments)
# WARNING: NAT and routing must be configured on host if disabled
# AWG_DISABLE_IPTABLES=false

# Health check timeout (seconds)
# HEALTHCHECK_TIMEOUT=5

# Verbose health check logging
# HEALTHCHECK_VERBOSE=false
