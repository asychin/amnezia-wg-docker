# üîê AmneziaWG Docker Server - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

<div align="center">

**üåç Languages: [üá∫üá∏ English](../../README.md) | [üá®üá≥ Chinese](../zh/README.md)**

---

[![Docker](https://img.shields.io/badge/Docker-Ready-2496ED?style=for-the-badge&logo=docker)](https://docker.com)
[![Go](https://img.shields.io/badge/Go-1.24-00ADD8?style=for-the-badge&logo=go)](https://golang.org)
[![Ubuntu](https://img.shields.io/badge/Ubuntu-22.04-E95420?style=for-the-badge&logo=ubuntu)](https://ubuntu.com)
[![License](https://img.shields.io/badge/License-MIT-green?style=for-the-badge)](LICENSE)

**–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è Docker-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è AmneziaWG VPN —Å–µ—Ä–≤–µ—Ä–∞ —Å –æ–±—Ö–æ–¥–æ–º DPI –∏ userspace —Ä–µ–∂–∏–º–æ–º —Ä–∞–±–æ—Ç—ã**

### üéØ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ = Docker + `make up`

_–í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!_

[üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç) ‚Ä¢ [üìã –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏) ‚Ä¢ [üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#Ô∏è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞) ‚Ä¢ [üîß API](#-api-–∫–æ–º–∞–Ω–¥—ã)

</div>

---

## üìö –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û –ø—Ä–æ–µ–∫—Ç–µ](#-–æ-–ø—Ä–æ–µ–∫—Ç–µ)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è](#Ô∏è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Ä–µ—à–µ–Ω–∏—è)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–î–µ—Ç–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞](#-–¥–µ—Ç–∞–ª—å–Ω–∞—è-—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏](#-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–∫–ª–∏–µ–Ω—Ç–∞–º–∏)
- [API –∫–æ–º–∞–Ω–¥—ã](#-api-–∫–æ–º–∞–Ω–¥—ã)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#Ô∏è-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–û–±—Ñ—É—Å–∫–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#-–æ–±—Ñ—É—Å–∫–∞—Ü–∏—è-–∏-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞](#-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞)
- [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](#-—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)
- [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏](#-—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏)
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

---

## üéØ –û –ø—Ä–æ–µ–∫—Ç–µ

### –ß—Ç–æ —ç—Ç–æ?

**AmneziaWG Docker Server** - —ç—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è AmneziaWG VPN —Å–µ—Ä–≤–µ—Ä–∞, —Ä–∞–±–æ—Ç–∞—é—â–∞—è –≤ userspace —Ä–µ–∂–∏–º–µ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π —è–¥—Ä–∞. –ü—Ä–æ–µ–∫—Ç –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∑–∞—â–∏—â–µ–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ–±—Ö–æ–¥–∞ —Å–∏—Å—Ç–µ–º –≥–ª—É–±–æ–∫–æ–π –∏–Ω—Å–ø–µ–∫—Ü–∏–∏ –ø–∞–∫–µ—Ç–æ–≤ (DPI).

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚ö° **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞ 1 –º–∏–Ω—É—Ç—É** - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ `make up` –¥–µ–ª–∞–µ—Ç –≤—Å—ë –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- üê≥ **100% Docker** - —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ª—é–±–æ–π —Å—Ä–µ–¥–µ —Å Docker
- üõ°Ô∏è **–û–±—Ö–æ–¥ DPI** - –º–∞—Å–∫–∏—Ä–æ–≤–∫–∞ VPN —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–æ–¥ HTTPS
- üöÄ **Userspace —Ä–µ–∂–∏–º** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –º–æ–¥—É–ª–µ–π —è–¥—Ä–∞
- üîß **–ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, —Å–±–æ—Ä–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
- üì± **QR –∫–æ–¥—ã** - –±—ã—Å—Ç—Ä–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –º–æ–±–∏–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- üîÑ **CI/CD ready** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ GitHub Actions, GitLab CI
- üíæ **–ê–≤—Ç–æ–±—ç–∫–∞–ø—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
- üè• **Health checks** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### –†–µ—à–∞–µ–º—ã–µ –∑–∞–¥–∞—á–∏

1. **–û–±—Ö–æ–¥ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ VPN** –≤ —Å—Ç—Ä–∞–Ω–∞—Ö —Å –∂–µ—Å—Ç–∫–æ–π —Ü–µ–Ω–∑—É—Ä–æ–π
2. **–ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** VPN —Å–µ—Ä–≤–µ—Ä–∞ –±–µ–∑ –≥–ª—É–±–æ–∫–∏—Ö –∑–Ω–∞–Ω–∏–π Linux
3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ** –¥–ª—è –∫–æ–º–∞–Ω–¥ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
4. **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —É–¥–∞–ª–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø** –∫ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è –º–æ–¥–µ–ª—å

```mermaid
graph TB
    subgraph "Docker Container"
        A[amneziawg-go<br/>Userspace WG]
        B[amneziawg-tools<br/>CLI —É—Ç–∏–ª–∏—Ç—ã]
        C[Bash Scripts<br/>–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è]
        D[Health Check<br/>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥]
    end

    subgraph "Host System"
        E[Docker Engine]
        F[iptables/NAT]
        G[Network Stack]
    end

    subgraph "External"
        H[Clients<br/>Mobile/Desktop]
        I[Internet]
    end

    A --> B
    B --> C
    C --> D
    A --> F
    F --> G
    G --> I
    H --> I
    I --> A
```

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç     | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è      | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                          |
| ------------- | --------------- | ------ | ----------------------------------- |
| **Core**      | amneziawg-go    | latest | Userspace —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞      |
| **Tools**     | amneziawg-tools | latest | –£—Ç–∏–ª–∏—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (awg, awg-quick) |
| **Container** | Docker          | 20.10+ | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è                     |
| **Base OS**   | Ubuntu          | 22.04  | –ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑                       |
| **Language**  | Go              | 1.24   | –û—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ amneziawg-go          |
| **Scripting** | Bash            | 5.0+   | –°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏               |
| **Build**     | Make            | 4.3+   | –°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏                      |

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
amnezia-wg-docker/
‚îú‚îÄ‚îÄ üì¶ amneziawg-go/           # Git submodule: Go —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ device/                # –õ–æ–≥–∏–∫–∞ VPN —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ awg/              # AmneziaWG —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ conn/                  # –°–µ—Ç–µ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ tun/                   # TUN –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ
‚îú‚îÄ‚îÄ üîß amneziawg-tools/         # Git submodule: CLI —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ src/                   # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ awg –∫–æ–º–∞–Ω–¥
‚îÇ
‚îú‚îÄ‚îÄ üìú scripts/                 # Bash —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ entrypoint.sh         # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ manage-clients.sh     # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ healthcheck.sh        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
‚îÇ   ‚îî‚îÄ‚îÄ diagnose.sh           # –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
‚îÇ
‚îú‚îÄ‚îÄ üê≥ Docker —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile            # Multi-stage —Å–±–æ—Ä–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ docker-compose.yml    # –ö–æ–º–ø–æ–∑–∏—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ .env.example          # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ Makefile              # –ö–æ–º–∞–Ω–¥—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
‚îÇ
‚îî‚îÄ‚îÄ üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
    ‚îî‚îÄ‚îÄ docs/                  # –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **–û–°**: Linux (Ubuntu 20.04+, Debian 11+, CentOS 8+)
- **Docker –∏ Docker Compose**: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–æ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ Docker](https://docs.docker.com/engine/install/ubuntu/)
- **RAM**: –º–∏–Ω–∏–º—É–º 512 MB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 1 GB)
- **CPU**: 1 vCPU (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 2 vCPU –¥–ª—è 50+ –∫–ª–∏–µ–Ω—Ç–æ–≤)
- **–î–∏—Å–∫**: 1 GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- **–°–µ—Ç—å**: –ü—É–±–ª–∏—á–Ω—ã–π IP –∞–¥—Ä–µ—Å

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞ 1 –º–∏–Ω—É—Ç—É

```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone --recursive https://github.com/yourusername/amnezia-wg-docker.git
cd amnezia-wg-docker

# 2. –ó–∞–ø—É—Å–∫–∞–µ–º! (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç, —Å–æ–±–∏—Ä–∞–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç)
make up

# 3. –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∏–µ–Ω—Ç–∞ –∏ –ø–æ–ª—É—á–∞–µ–º QR –∫–æ–¥
make client-add name=myphone
make client-qr name=myphone
```

**üéØ –í—Å—ë!** –ö–æ–º–∞–Ω–¥–∞ `make up` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ–µ–∫—Ç –∏ —Å–∞–±–º–æ–¥—É–ª–∏
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ —à–∞–±–ª–æ–Ω–∞
- ‚úÖ –°–æ–±–∏—Ä–∞–µ—Ç Docker –æ–±—Ä–∞–∑
- ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç VPN —Å–µ—Ä–≤–µ—Ä
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Å–µ—Ç—å –∏ iptables
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π IP

---

## üì¶ –î–µ—Ç–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ)

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker –∏ Docker Compose —Å–æ–≥–ª–∞—Å–Ω–æ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Docker](https://docs.docker.com/engine/install/ubuntu/):

#### –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–ª—è Ubuntu/Debian:

```bash
# –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Docker
curl -fsSL https://get.docker.com | sudo sh

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É
docker --version
docker compose version
```

#### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± —á–µ—Ä–µ–∑ APT —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
sudo apt-get update
sudo apt-get install ca-certificates curl

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Docker GPG –∫–ª—é—á–∞
sudo install -m 0755 -d /etc/apt/keyrings
sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
sudo chmod a+r /etc/apt/keyrings/docker.asc

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
sudo apt-get update
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å–∫ AmneziaWG (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞)

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º –ø—Ä–æ–µ–∫—Ç
git clone --recursive https://github.com/yourusername/amnezia-wg-docker.git
cd amnezia-wg-docker

# –ó–ê–ü–£–°–ö–ê–ï–ú! –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Å—ë –Ω–∞—Å—Ç—Ä–æ–∏—Ç
make up
```

**‚ú® –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ `make up`:**

- üì¶ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è git —Å–∞–±–º–æ–¥—É–ª–µ–π (amneziawg-go, amneziawg-tools)
- ‚öôÔ∏è –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ .env –∏–∑ —à–∞–±–ª–æ–Ω–∞ —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- üê≥ –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞ —Å multi-stage –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π
- üöÄ –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ capabilities
- üåê –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ IP —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–∏—Å–æ–≤
- üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ iptables –∏ IP forwarding –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–û—Ç–∫—Ä–æ–π—Ç–µ UDP –ø–æ—Ä—Ç 51820 –Ω–∞ —Ö–æ—Å—Ç–µ:

```bash
# –î–ª—è UFW (Ubuntu/Debian)
sudo ufw allow 51820/udp

# –î–ª—è firewalld (CentOS/RHEL)
sudo firewall-cmd --permanent --add-port=51820/udp
sudo firewall-cmd --reload
```

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`:

```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
nano .env

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å –Ω–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
make restart
```

---

## üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ IP
make client-add name=john

# –° —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ IP
make client-add name=anna ip=10.13.13.15

# –ü—Ä–æ—Å–º–æ—Ç—Ä QR –∫–æ–¥–∞
make client-qr name=john

# –≠–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
make client-config name=john > configs/john.conf
```

### –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞

```bash
# –£–¥–∞–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞
make client-rm name=john

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤
make client-list
```

### –ú–∞—Å—Å–æ–≤–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤

```bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
for i in {1..10}; do
    make client-add name=user$i
done
```

---

## üîß API –∫–æ–º–∞–Ω–¥—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞        | –û–ø–∏—Å–∞–Ω–∏–µ              | –ü—Ä–∏–º–µ—Ä         |
| -------------- | --------------------- | -------------- |
| `make help`    | –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã  | `make help`    |
| `make init`    | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ | `make init`    |
| `make build`   | –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞  | `make build`   |
| `make up`      | –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞        | `make up`      |
| `make down`    | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞     | `make down`    |
| `make restart` | –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞    | `make restart` |
| `make status`  | –°—Ç–∞—Ç—É—Å –∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è   | `make status`  |
| `make logs`    | –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤        | `make logs`    |

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏

| –ö–æ–º–∞–Ω–¥–∞              | –û–ø–∏—Å–∞–Ω–∏–µ             | –ü—Ä–∏–º–µ—Ä                                    |
| -------------------- | -------------------- | ----------------------------------------- |
| `make client-add`    | –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞     | `make client-add name=john ip=10.13.13.5` |
| `make client-rm`     | –£–¥–∞–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞      | `make client-rm name=john`                |
| `make client-list`   | –°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤      | `make client-list`                        |
| `make client-qr`     | QR –∫–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞       | `make client-qr name=john`                |
| `make client-config` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ | `make client-config name=john`            |

### –£—Ç–∏–ª–∏—Ç—ã –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

| –ö–æ–º–∞–Ω–¥–∞        | –û–ø–∏—Å–∞–Ω–∏–µ                      | –ü—Ä–∏–º–µ—Ä                            |
| -------------- | ----------------------------- | --------------------------------- |
| `make shell`   | –í—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä              | `make shell`                      |
| `make backup`  | –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø                 | `make backup`                     |
| `make restore` | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±—ç–∫–∞–ø–∞        | `make restore file=backup.tar.gz` |
| `make test`    | –¢–µ—Å—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏             | `make test`                       |
| `make debug`   | –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è         | `make debug`                      |
| `make monitor` | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ | `make monitor`                    |
| `make clean`   | –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞                | `make clean`                      |

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

```bash
# === –û–°–ù–û–í–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò ===
AWG_INTERFACE=awg0              # –ò–º—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
AWG_PORT=51820                  # UDP –ø–æ—Ä—Ç (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ 443, 53)
AWG_NET=10.13.13.0/24          # –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–µ—Ç—å VPN
AWG_SERVER_IP=10.13.13.1       # IP —Å–µ—Ä–≤–µ—Ä–∞ –≤ VPN
AWG_DNS=8.8.8.8,8.8.4.4        # DNS –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤

# === –ü–£–ë–õ–ò–ß–ù–´–ô IP ===
SERVER_PUBLIC_IP=auto           # auto –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π IP

# === –ü–ê–†–ê–ú–ï–¢–†–´ –û–ë–§–£–°–ö–ê–¶–ò–ò ===
AWG_JC=7                        # –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å –¥–∂–∏—Ç—Ç–µ—Ä–∞ (3-15)
AWG_JMIN=50                     # –ú–∏–Ω. —Ä–∞–∑–º–µ—Ä –º—É—Å–æ—Ä–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
AWG_JMAX=1000                   # –ú–∞–∫—Å. —Ä–∞–∑–º–µ—Ä –º—É—Å–æ—Ä–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
AWG_S1=86                       # –†–∞–∑–º–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞ 1
AWG_S2=574                      # –†–∞–∑–º–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞ 2
AWG_H1=1                        # –•–µ—à-—Ñ—É–Ω–∫—Ü–∏—è 1
AWG_H2=2                        # –•–µ—à-—Ñ—É–Ω–∫—Ü–∏—è 2
AWG_H3=3                        # –•–µ—à-—Ñ—É–Ω–∫—Ü–∏—è 3
AWG_H4=4                        # –•–µ—à-—Ñ—É–Ω–∫—Ü–∏—è 4

# === –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û ===
ALLOWED_IPS=0.0.0.0/0          # –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤
CLIENTS_SUBNET=10.13.13.0/24   # –ü–æ–¥—Å–µ—Ç—å –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
```

### –ü—Ä–æ—Ñ–∏–ª–∏ –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏

#### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

```bash
AWG_JC=7
AWG_JMIN=50
AWG_JMAX=1000
AWG_S1=86
AWG_S2=574
```

#### –£—Å–∏–ª–µ–Ω–Ω–∞—è –æ–±—Ñ—É—Å–∫–∞—Ü–∏—è (—Å—Ç—Ä–æ–≥–∏–π DPI)

```bash
AWG_JC=12
AWG_JMIN=75
AWG_JMAX=1500
AWG_S1=96
AWG_S2=684
```

#### –ò–º–∏—Ç–∞—Ü–∏—è DNS —Ç—Ä–∞—Ñ–∏–∫–∞

```bash
AWG_PORT=53
AWG_JC=5
AWG_JMIN=32
AWG_JMAX=512
```

#### –ò–º–∏—Ç–∞—Ü–∏—è HTTPS —Ç—Ä–∞—Ñ–∏–∫–∞

```bash
AWG_PORT=443
AWG_JC=8
AWG_S1=86
AWG_S2=574
```

---

## üîí –û–±—Ñ—É—Å–∫–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏

AmneziaWG –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏ VPN —Ç—Ä–∞—Ñ–∏–∫–∞:

1. **Junk Packets (–ú—É—Å–æ—Ä–Ω—ã–µ –ø–∞–∫–µ—Ç—ã)**

   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ handshake
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: Jc (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ), Jmin/Jmax (—Ä–∞–∑–º–µ—Ä)

2. **Header Obfuscation (–û–±—Ñ—É—Å–∫–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤)**

   - –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –ø–∞–∫–µ—Ç–æ–≤
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: S1, S2 (—Ä–∞–∑–º–µ—Ä—ã), H1-H4 (—Ö–µ—à-—Ñ—É–Ω–∫—Ü–∏–∏)

3. **Traffic Patterns (–ü–∞—Ç—Ç–µ—Ä–Ω—ã —Ç—Ä–∞—Ñ–∏–∫–∞)**
   - –ò–º–∏—Ç–∞—Ü–∏—è HTTPS/DNS —Ç—Ä–∞—Ñ–∏–∫–∞
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤ (443, 53)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

#### –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å

1. **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**

   ```bash
   make update
   ```

2. **–°–º–µ–Ω–∞ –ø–æ—Ä—Ç–æ–≤**

   ```bash
   # –í .env —Ñ–∞–π–ª–µ
   AWG_PORT=443  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTPS –ø–æ—Ä—Ç
   ```

3. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞**

   ```bash
   # –¢–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ IP –º–æ–≥—É—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –ø–æ SSH
   sudo ufw allow from 203.0.113.0/24 to any port 22
   ```

4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤**
   ```bash
   make logs | grep -E "(ERROR|WARN|attack)"
   ```

#### –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π**
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–π**
3. **–†–µ–≥—É–ª—è—Ä–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π**
4. **–ò–∑–±–µ–≥–∞–Ω–∏–µ –ø—É–±–ª–∏—á–Ω—ã—Ö Wi-Fi –±–µ–∑ VPN**

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### Health Check —Å–∏—Å—Ç–µ–º–∞

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏—Å—Ç–µ–º—É –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è:

```bash
# –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
docker exec amneziawg-server /app/scripts/healthcheck.sh

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ Docker
docker ps --format "table {{.Names}}\t{{.Status}}"
```

#### –ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

- ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å amneziawg-go
- ‚úÖ –°–µ—Ç–µ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å awg0
- ‚úÖ UDP –ø–æ—Ä—Ç 51820
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è AmneziaWG
- ‚úÖ DNS —Ä–µ–∑–æ–ª–≤–∏–Ω–≥
- ‚úÖ –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ IP –∞–¥—Ä–µ—Å–∞—Ü–∏—è
- ‚úÖ iptables –ø—Ä–∞–≤–∏–ª–∞

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```bash
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
make monitor

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
docker exec amneziawg-server awg show awg0

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats amneziawg-server
```

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```bash
# CPU –∏ –ø–∞–º—è—Ç—å
docker stats --no-stream amneziawg-server

# –°–µ—Ç–µ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
docker exec amneziawg-server netstat -s

# –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
docker exec amneziawg-server awg show awg0 latest-handshakes
```

---

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

#### 1. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º**: `make up` –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –æ—à–∏–±–∫–æ–π

**–†–µ—à–µ–Ω–∏–µ**:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker logs amneziawg-server

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
sudo chmod +x scripts/*.sh

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
make clean
make build
```

#### 2. –ö–ª–∏–µ–Ω—Ç—ã –Ω–µ –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º**: –ö–ª–∏–µ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

**–†–µ—à–µ–Ω–∏–µ**:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–∞
sudo netstat -ulnp | grep 51820

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞
sudo ufw status
sudo iptables -L -n

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—É–±–ª–∏—á–Ω–æ–≥–æ IP
curl ifconfig.me
```

#### 3. –ù–∏–∑–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

**–°–∏–º–ø—Ç–æ–º**: –ú–µ–¥–ª–µ–Ω–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ**:

```bash
# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è MTU
docker exec amneziawg-server ip link set mtu 1420 dev awg0

# –£–º–µ–Ω—å—à–µ–Ω–∏–µ –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏
# –í .env: AWG_JC=3, AWG_JMIN=20, AWG_JMAX=500
```

#### 4. –û—à–∏–±–∫–∞ TUN —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

**–°–∏–º–ø—Ç–æ–º**: `Error: TUN device not available`

**–†–µ—à–µ–Ω–∏–µ**:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥—É–ª—è
lsmod | grep tun

# –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª—è
sudo modprobe tun

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
ls -la /dev/net/tun
```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
make debug

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
docker exec amneziawg-server ip addr show awg0

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
docker exec amneziawg-server ip route

# –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS
docker exec amneziawg-server nslookup google.com

# –ü—Ä–æ–≤–µ—Ä–∫–∞ iptables
docker exec amneziawg-server iptables -t nat -L -n
```

---

## üìà –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ

| –ü–∞—Ä–∞–º–µ—Ç—Ä    | –ú–∏–Ω–∏–º—É–º | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è | –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ |
| ----------- | ------- | ------------- | ------------ |
| **CPU**     | 1 vCPU  | 2 vCPU        | 4 vCPU       |
| **RAM**     | 512 MB  | 1 GB          | 2 GB         |
| **–î–∏—Å–∫**    | 1 GB    | 5 GB          | 10 GB        |
| **–°–µ—Ç—å**    | 10 Mbps | 100 Mbps      | 1 Gbps       |
| **–ö–ª–∏–µ–Ω—Ç—ã** | 1-10    | 10-50         | 50-200       |

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –ú–µ—Ç—Ä–∏–∫–∞                    | –ó–Ω–∞—á–µ–Ω–∏–µ  | –£—Å–ª–æ–≤–∏—è                    |
| -------------------------- | --------- | -------------------------- |
| **–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å** | –î–æ 1 Gbps | –ü—Ä–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö |
| **–õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**            | +5-15 ms  | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞    |
| **CPU –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞**         | ~1-2%     | –ù–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º CPU         |
| **RAM –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞**         | ~5-10 MB  | –°—Ä–µ–¥–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞           |
| **Handshake –≤—Ä–µ–º—è**        | <100 ms   | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ–±—Ñ—É—Å–∫–∞—Ü–∏—è     |

### –°–µ—Ç–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä              | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ                     |
| --------------------- | -------- | ---------------------------- |
| **MTU**               | 1420     | –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è VPN |
| **Keepalive**         | 25 —Å–µ–∫   | –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è       |
| **Handshake timeout** | 5 —Å–µ–∫    | –¢–∞–π–º–∞—É—Ç —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è          |
| **Rekey interval**    | 2 –º–∏–Ω    | –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–º–µ–Ω—ã –∫–ª—é—á–µ–π        |

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- **–ú–∞–∫—Å–∏–º—É–º –∫–ª–∏–µ–Ω—Ç–æ–≤**: ~250 (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ–¥—Å–µ—Ç–∏ /24)
- **–ú–∞–∫—Å–∏–º—É–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤**: 1 –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ IPv6**: –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- **Multi-hop**: –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è

---

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°–±–æ—Ä–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ñ–æ—Ä–∫–∞–º–∏ —Å–∞–±–º–æ–¥—É–ª–µ–π
git clone --recursive https://github.com/yourusername/amnezia-wg-docker.git
cd amnezia-wg-docker

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∞–±–º–æ–¥—É–ª–µ–π
git submodule update --remote --recursive

# –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞
docker build -t amneziawg:dev .

# –ó–∞–ø—É—Å–∫ dev –≤–µ—Ä—Å–∏–∏
docker run -d \
    --name amneziawg-dev \
    --cap-add NET_ADMIN \
    --device /dev/net/tun \
    -p 51820:51820/udp \
    amneziawg:dev
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Docker –æ–±—Ä–∞–∑–∞

```dockerfile
# Stage 1: Builder (golang:1.24-alpine)
- –ö–æ–º–ø–∏–ª—è—Ü–∏—è amneziawg-go
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –ª–∏–Ω–∫–æ–≤–∫–∞
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞

# Stage 2: Runtime (ubuntu:22.04)
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –°–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- Health checks
- –†–∞–∑–º–µ—Ä: ~150 MB
```

### CI/CD Pipeline

```yaml
# GitHub Actions –ø—Ä–∏–º–µ—Ä
name: Build and Test
on: [push, pull_request]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
        with:
          submodules: recursive
      - name: Build Docker image
        run: make build
      - name: Run tests
        run: make test
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# Unit —Ç–µ—Å—Ç—ã
cd amneziawg-go
go test ./...

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
make test

# –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
docker exec amneziawg-server \
    awg-bench --clients 100 --duration 60s
```

---

## ü§ù –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

### –ö–∞–∫ –≤–Ω–µ—Å—Ç–∏ –≤–∫–ª–∞–¥

1. **Fork** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ **feature branch** (`git checkout -b feature/AmazingFeature`)
3. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ **commit** (`git commit -m 'Add AmazingFeature'`)
4. **Push** –≤ branch (`git push origin feature/AmazingFeature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ **Pull Request**

### –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∞

- **Go**: –°–ª–µ–¥—É–π—Ç–µ [Go Code Review Comments](https://github.com/golang/go/wiki/CodeReviewComments)
- **Bash**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ [ShellCheck](https://www.shellcheck.net/)
- **Docker**: –°–ª–µ–¥—É–π—Ç–µ [Best Practices](https://docs.docker.com/develop/dev-best-practices/)

### –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–∞—Ö

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ issue —É–∫–∞–∑—ã–≤–∞–π—Ç–µ:

1. –í–µ—Ä—Å–∏—é Docker –∏ –û–°
2. –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (`make logs`)
3. –í—ã–≤–æ–¥ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ (`make debug`)
4. –®–∞–≥–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π AmneziaWG](https://github.com/amnezia-vpn/amneziawg)
- [WireGuard Protocol](https://www.wireguard.com/protocol/)
- [Docker Documentation](https://docs.docker.com/)

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [AmneziaVPN –∫–ª–∏–µ–Ω—Ç—ã](https://amnezia.org/downloads)
- [–ü—Ä–æ–≤–µ—Ä–∫–∞ IP —É—Ç–µ—á–µ–∫](https://ipleak.net/)
- [–¢–µ—Å—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏](https://fast.com/)

### –°–æ–æ–±—â–µ—Å—Ç–≤–æ

- [GitHub Issues](https://github.com/yourusername/amnezia-wg-docker/issues)
- [Discussions](https://github.com/yourusername/amnezia-wg-docker/discussions)
- [Telegram –≥—Ä—É–ø–ø–∞](https://t.me/amneziawg)

---

## ‚öñÔ∏è –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π **MIT License** - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –∏—Ö –ª–∏—Ü–µ–Ω–∑–∏–∏

- **amneziawg-go**: MIT License
- **amneziawg-tools**: GPL-2.0
- **Docker —Å–∫—Ä–∏–ø—Ç—ã**: MIT License

---

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- **[AmneziaVPN Team](https://github.com/amnezia-vpn)** - –∑–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ AmneziaWG
- **[WireGuard](https://www.wireguard.com/)** - –∑–∞ –±–∞–∑–æ–≤—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª
- **[Docker Community](https://www.docker.com/community)** - –∑–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏
- **–ö–æ–Ω—Ç—Ä–∏–±—å—é—Ç–æ—Ä—ã** - –∑–∞ —É–ª—É—á—à–µ–Ω–∏—è –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

---

<div align="center">

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ —Å ‚ù§Ô∏è | cheza.dev

</div>
